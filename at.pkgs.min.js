(at=this.at||{}).pkgs=new (function(a){this.Object=(function(b){var c;c=function(d){};c.extend=function(f,e,g){var h;var d;h=new Function();h.prototype=this.prototype;f.prototype=new h();d=null;if(e){for(d in e){f.prototype[d]=e[d]}}f.prototype.self=f;f.prototype.parent=this.prototype;for(d in this){if(d=="prototype"){continue}f[d]=this[d]}if(g){for(d in g){f[d]=g[d]}}return f};c.prototype.self=c;c.prototype.parent=null;return c})(this);this.Log=(function(b){var c;c=b.Object.extend((function(e,d){d=d||this;this.parent.self(d);d.level=this.self.INFO;d.name=e}),{level:null,name:null,stack:function(e){var d;if(!e.stack){return false}d=e.stack.toString().match(/^.*$/gm);if(d[0].match(/^Error/)){d.shift()}else{}d.shift();d.shift();return d.join("\n")},log:function(h,f,g){var e;if(this.level<h){return false}if(!this.self.append()){return false}if(f.length<1){return true}e="["+this.self.LEVELS[h]+"] ";e+=this.name+": ";e+=this.self.format.apply(this,f);try{if(!g){throw new Error()}}catch(d){g=this.stack(d)}return this.self.append(e,g)},debug:function(d,e){return this.log(this.self.DEBUG,arguments)},info:function(d,e){return this.log(this.self.INFO,arguments)},error:function(d,e){return this.log(this.self.ERROR,arguments)},_catch_:function(d){this.log(this.self.ERROR,[d.toString()],d.stack);return this},_throw_:function(d){this._catch_(d);throw d},trap:function(g,f,d){var e;e=this;return function(){try{if(d){g.log=e}g.apply(this,arguments)}catch(h){f?e._catch_(h):e._throw_(h)}}}},{LEVELS:["ERROR","INFO","DEBUG"],ERROR:0,INFO:1,DEBUG:2,instances:{},get:function(d){if(!this.instances[d]){this.instances[d]=new this(d)}return this.instances[d]},debug:function(d){this.get(d).level=this.DEBUG;return this},append:function(d,e){if(!(a.console&&a.console.log)){return false}if(arguments.length<1){return true}a.console.log(d+(e?("\n"+e):""));return true},format:function(d,f){var e;if(!f){return d}e=arguments;return d.replace(/\{(\d*)?(:\w*)?\}/g,function(g,i,h){var j;i=i?parseInt(i,10):0;j=e[i+1];return h?j[h.substring(1)]:j})}});return c})(this);this.EventBinder=(function(b){var c;c=b.Object.extend((function(d){d=d||this;this.parent.self(d);d.handlers=new Array()}),{handlers:null,bind:function(d,e){if(e){this.handlers.unshift(d)}else{this.handlers.push(d)}return this},unbind:function(e){var d;d=0;while(d<this.handlers.length){if(this.handlers[d]==e){this.handlers.splice(d,1)}d++}return this},clear:function(){this.handlers.length=0;return this},fire:function(){var d;var e;for(d=0;d<this.handlers.length;d++){e=this.handlers[d];if(e.apply(e,arguments)===false){break}}return this}});return c})(this)})(this);